{% set pathbrowse = isValidPath(currentPath)? currentPath : '/' %}
{% set multiselect = 1 %}
{% set multiselectFilesOnly = false %}

{% extends "flm::dialog-window.twig" %}
{% block heading %}
        <legend>{{ theUILang.fDiagCopySel }} </legend>
{% endblock %}

{% block scripts %}
<script>
(function (global) {
    var dialogs = flm.ui.getDialogs();
    var diagId = dialogs.getDialogId();

    dialogs.onStart(function () {
        dialogs.disableStartButton();
        return flm.manager.doCopy(dialogs.getTargetPath(diagId), dialogs.getCheckedList(diagId)).then(

        );
    });

    var updateName = function(prefix, entry) {

        var path =dialogs.getTargetPath(diagId);

        dialogs.updateTargetPath(diagId, flm.utils.buildPath([flm.utils.basedir(path), prefix + flm.utils.basename(entry)]) );
    };

    var entries = dialogs.getCheckedList(diagId);

    if(entries.length == 1)
    {
        updateName('Copy of ', entries[0]);
    }

})
(window);
</script>
{% endblock %}

{% set startButtonValue = theUILang.fDiagCopyBut %}
